<!DOCTYPE html>
<html lang="en">

<head>

  <!-- base url for all relative urls.  -->
  <base href="{%= argument.url %}" target="_top">

  {% if( argument.distribution == 'es5') { %}
  <!-- This block adds the "custom-elements-es5-adapter.js" shim to your application.
          It includes special logic that removes the shim before it can be parsed or run
          on browsers without native support for ES2015+ & custom elements. -->
  <div id="autogenerated-ce-es5-shim">
    <script type="application/javascript">
      if (!window.customElements) {
        var ceShimContainer = document.querySelector('#autogenerated-ce-es5-shim');
        ceShimContainer.parentElement.removeChild(ceShimContainer);
      }
    </script>
    <script type="application/javascript"
      src="/asset/webcomponent/component.package/webcomponentsjs/custom-elements-es5-adapter.js"></script>
  </div>
  <script>
    console.info('☕ Serving ES5 compiled app version.');
  </script>
  <script type="application/javascript"
    src="/asset/webcomponent/component.package/webcomponentsjs/webcomponents-lite.js"></script>
  {% } else { %}
  <script type="application/javascript"
    src="/asset/webcomponent/component.package/webcomponentsjs/webcomponents-loader.js"></script>
  {% } %}

  <!-- Analytics -->
  {% if(argument.distribution == 'production') { %}
  <script type="application/javascript">
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o), m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-25921244-8', 'auto');
    ga('send', 'pageview');
  </script>
  {% } else { %}
  <script>
    console.info('☕ Analytics is disabled for development.');
  </script>
  {% } %}

  {% print(insert[1] && insert[1]())  // `print` is a function provided by underscore.template, allows for printing string through js logic %}

  <!-- NOTE: Loading Polymer on the main document, in addition to the elements causes issues for some reason.
      <link rel="import" href="/asset/webcomponent/component.package/polymer/polymer-element.html"> 
    -->
  <link rel="import" href="/asset/webcomponent/document-element/document-element.html$">

  <style>
  </style>
</head>

<body>

  {%= insert[2] && insert[2]() %}

  <span>Footer:</span>

  {%=  insert[3] && insert[3]() %}

</body>

</html>